import{l as S,_ as F,u as y,a as I,s as L,r as l,o as B,c as T,b as V,d,e as h,f as o,g as q,h as x,w as p,v as A,i as D,F as N,j as P,t as U,k as $,p as j,m as z,n as E,q as Q,x as G}from"./index-BhDnmpYX.js";import{c as H}from"./chat-CGlIDp7N.js";const v=S();async function J(a,c){v.defaults.headers.Authorization="Bearer "+localStorage.getItem("accessToken"),await v.get("/friends").then(a).catch(c),console.log("친구 목록 조회 성공")}const u=a=>(j("data-v-1f2c7515"),a=a(),z(),a),K={class:"friend-list container mt-5"},O={class:"friend-header"},W=u(()=>o("div",{class:"friend"},"친구",-1)),X={class:"friend-buttons"},Y=u(()=>o("div",{class:"search"},[o("img",{src:E,alt:""})],-1)),Z=[Y],ee=u(()=>o("img",{src:"",alt:""},null,-1)),oe=[ee],se={class:"friend-search mb-3"},te={class:"list-group"},ae=["onClick"],ne={class:"friend-item"},le=["src"],ce={class:"buttons"},re=["onClick"],ie=u(()=>o("img",{src:Q,alt:""},null,-1)),de=[ie],ue={__name:"FriendList",setup(a){const c=y(),f=I();L(f);const g=l(null),r=l(!1),i=l(""),_=l([]),m=l("");B(()=>{C()});const C=()=>{console.log("친구 목록 가져오기"),J(({data:e})=>{console.log("친구 목록 리스트"),console.log(e),_.value=e},e=>{console.log(e)})},k=e=>{const t={path:"/friend-profile",component:G,props:{friend:e}};c.push(t)},b=T(()=>_.value.filter(e=>e.name.toLowerCase().includes(i.value.toLowerCase()))),w=e=>{g.value=e;const t={title:e.nickname+"의 대화방",receiver:e.nickname};H(t,n=>{let s="채팅방 생성에 문제 발생했습니다";n.status==200?(s="채팅방 입장 완료되었습니다.",m.value=n.data.chatRoomId,console.log(m.value),alert(s),c.push({name:"chat-view",params:{roomid:m.value}})):alert(s)},n=>console.error(n))},R=()=>{r.value=!r.value,r.value||(i.value="")};return(e,t)=>{const n=V("CreateRoomModal");return d(),h("div",K,[o("div",O,[W,o("div",X,[o("button",{class:"create-chat-button btn",onClick:R},Z),o("button",{class:"create-chat-button btn",onClick:t[0]||(t[0]=(...s)=>e.showCreateRoomModal&&e.showCreateRoomModal(...s))},oe),e.showModal?(d(),q(n,{key:0,onClose:e.closeCreateRoomModal,onCreate:e.createRoom},null,8,["onClose","onCreate"])):x("",!0)])]),p(o("div",se,[p(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),type:"text",class:"form-control",placeholder:"친구 검색"},null,512),[[D,i.value]])],512),[[A,r.value]]),o("ul",te,[(d(!0),h(N,null,P(b.value,s=>(d(),h("li",{key:s.id,class:"list-group-item",onClick:M=>k(s)},[o("div",ne,[o("img",{src:s.profileUrl,alt:"프로필 이미지",class:"profile-image mr-2"},null,8,le),o("span",null,U(s.nickname),1)]),o("div",ce,[o("button",{class:"btn btn-sm",onClick:$(M=>w(s),["stop"])},de,8,re)])],8,ae))),128))])])}}},_e=F(ue,[["__scopeId","data-v-1f2c7515"]]);export{_e as default};
