import{l as L,_ as M,u as y,a as I,s as B,r as c,o as q,c as x,b as T,d,e as _,f as e,g as V,h as A,w as p,v as D,i as N,F as P,j as U,t as $,k as j,p as z,m as E,n as Q,q as G,x as H,y as J}from"./index-DSQAm8oj.js";import{c as K}from"./chat-C7yx2JRV.js";const v=L();async function O(t,l){v.defaults.headers.Authorization="Bearer "+localStorage.getItem("accessToken"),await v.get("/friends").then(t).catch(l),console.log("친구 목록 조회 성공")}const u=t=>(z("data-v-0fdef326"),t=t(),E(),t),W={class:"friend-list container mt-5"},X={class:"friend-header"},Y=u(()=>e("div",{class:"friend"},"친구",-1)),Z={class:"friend-buttons"},ee=u(()=>e("div",{class:"search"},[e("img",{src:Q,alt:""})],-1)),oe=[ee],se=u(()=>e("img",{src:G,alt:""},null,-1)),te=[se],ae={class:"friend-search mb-3"},ne={class:"list-group"},le=["onClick"],ce={class:"friend-item"},re=["src"],ie={class:"buttons"},de=["onClick"],ue=u(()=>e("img",{src:H,alt:""},null,-1)),me=[ue],_e={__name:"FriendList",setup(t){const l=y(),f=I();B(f);const g=c(null),r=c(!1),i=c(""),h=c([]),m=c("");q(()=>{C()});const C=()=>{console.log("친구 목록 가져오기"),O(({data:o})=>{console.log("친구 목록 리스트"),console.log(o),h.value=o},o=>{console.log(o)})},k=o=>{const a={path:"/friend-profile",component:J,props:{friend:o}};l.push(a)},b=x(()=>h.value.filter(o=>o.name.toLowerCase().includes(i.value.toLowerCase()))),w=o=>{g.value=o;const a={title:o.nickname+"의 대화방",receiver:o.nickname};K(a,n=>{let s="채팅방 생성에 문제 발생했습니다";n.status==200?(s="채팅방 입장 완료되었습니다.",m.value=n.data.chatRoomId,console.log(m.value),alert(s),l.push({name:"chat-view",params:{roomid:m.value}})):alert(s)},n=>console.error(n))},R=()=>{l.push("/friendRequestList")},F=()=>{r.value=!r.value,r.value||(i.value="")};return(o,a)=>{const n=T("CreateRoomModal");return d(),_("div",W,[e("div",X,[Y,e("div",Z,[e("button",{class:"create-chat-button btn",onClick:F},oe),e("button",{class:"create-chat-button btn",onClick:R},te),o.showModal?(d(),V(n,{key:0,onClose:o.closeCreateRoomModal,onCreate:o.createRoom},null,8,["onClose","onCreate"])):A("",!0)])]),p(e("div",ae,[p(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>i.value=s),type:"text",class:"form-control",placeholder:"친구 검색"},null,512),[[N,i.value]])],512),[[D,r.value]]),e("ul",ne,[(d(!0),_(P,null,U(b.value,s=>(d(),_("li",{key:s.id,class:"list-group-item",onClick:S=>k(s)},[e("div",ce,[e("img",{src:s.profileUrl,alt:"프로필 이미지",class:"profile-image mr-2"},null,8,re),e("span",null,$(s.nickname),1)]),e("div",ie,[e("button",{class:"btn btn-sm",onClick:j(S=>w(s),["stop"])},me,8,de)])],8,le))),128))])])}}},ve=M(_e,[["__scopeId","data-v-0fdef326"]]);export{ve as default};
